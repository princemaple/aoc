# Day3

## Untitled

<!-- livebook:{"livebook_object":"cell_input","name":"input","type":"textarea","value":"000010000011\n001010000111\n011010000010\n000011111110\n101101000101\n000100010100\n111101111110\n111111000010\n000011010011\n100011100000\n101110110001\n111011111101\n111011011001\n010101000010\n000010001000\n101010011111\n010000111101\n011010111100\n101111010110\n000110110101\n001010000001\n110101100110\n111110010100\n001000001011\n100111101001\n000010010001\n100100101010\n011010110111\n000001100100\n101111000111\n010101101100\n001111010010\n010001011100\n110101011011\n000010101000\n011011101101\n101001000011\n101111000000\n001111101111\n001101110111\n110110110101\n100011001011\n010110110011\n001010001110\n110110100100\n001001111111\n100111011100\n101101001010\n011110000011\n010101111000\n001101000101\n100011001100\n110000110001\n011101010001\n000110001101\n110001101101\n011001000110\n011101010101\n110110011010\n001000011001\n100101100101\n010110001100\n110100011001\n001011000010\n101011110101\n011101001010\n011011000111\n000101000001\n100001010110\n111101000011\n111010111011\n000011101001\n011111110000\n110011100101\n110011100110\n101011001011\n100110110111\n010001111100\n101010011001\n111001111011\n111001000011\n010010111010\n011011011110\n101000010000\n000010011111\n000101110000\n101010000110\n101100000100\n110000110000\n000010100010\n010001111001\n001000001111\n010110000011\n010000111110\n001011001010\n011010100001\n001001000110\n011010001101\n100111011101\n011101010000\n100111010100\n100101001101\n111010101001\n011001011101\n010011000000\n000001100110\n110101011100\n000110101000\n011110001000\n010011000001\n100011011111\n100100001111\n010011101010\n001011000001\n111101011000\n011101000110\n111011001101\n110110010110\n111011000110\n111111010101\n101110100111\n011110010001\n010100011111\n001111000101\n101100010011\n111101000010\n100001110100\n110001110011\n011011110101\n100110111101\n110010011010\n111001000110\n100010111111\n100010101110\n011110111001\n011100101100\n010101111101\n101010111011\n111111110100\n010111100110\n111010101111\n011001110000\n101011100011\n101000000110\n111100011011\n001001010010\n001010110001\n000111101101\n100010000101\n010001101110\n000100100001\n010100011000\n001100011011\n111111110011\n111010010000\n001100101001\n000101001110\n111100111010\n111110010000\n010111001000\n011100001100\n000010011010\n101010101011\n110100011011\n010110101101\n000001000101\n111111010011\n110000000110\n110100111111\n111000000010\n000101010111\n001110110110\n111111111011\n010010100100\n110000010011\n010111110111\n111000010010\n111011100000\n010100000101\n010011011001\n000110101111\n110111101111\n101001001011\n101111110111\n111010101011\n100100010101\n100100011100\n000011010111\n011010101011\n101000111010\n010101011101\n101101000001\n010111110010\n111101011010\n000001010100\n011010101000\n010000110010\n101000011100\n010001010000\n000001001101\n100101110001\n001101010010\n001100111110\n011101010111\n111110011100\n100011000101\n101111100100\n111011001000\n010111000110\n001010111100\n011011110001\n111010011110\n101011100110\n001100010111\n111110110111\n101011010001\n011110100011\n110000001110\n101011101011\n101101000111\n110111111111\n010000011000\n001110001000\n111000000101\n010111101100\n000100000101\n001111100101\n101001111101\n010111110101\n100110010101\n111101101100\n111100010010\n110011111110\n011100010101\n111001001100\n101010110000\n010100010010\n111100110000\n111100001000\n111100110110\n101101110010\n010001101100\n010110010000\n100000100101\n000000001110\n011001100110\n100101000010\n011111100010\n010010100010\n100101011001\n011100100100\n010111110000\n100111000110\n111110011011\n011111000011\n101001100101\n000110101110\n111001111110\n011110011101\n101011111111\n010110101010\n100001100111\n000101001111\n110100011101\n111110100111\n101000111110\n010010011110\n100110100111\n000111010011\n110101110110\n101101000000\n110110111110\n001100111111\n000010101010\n001001001001\n101000110110\n010011111000\n000101110011\n011100001111\n000001101110\n100001010010\n001100000011\n011100101110\n111000111000\n110010110111\n100100000010\n010101100100\n100111001101\n011101100100\n110010001010\n100111000000\n111011001100\n010010010011\n110110100001\n001011110001\n010000100110\n001111100100\n100110001000\n101000010001\n001000001000\n110001001011\n001010010101\n101001111011\n011101110010\n101000100110\n010000101110\n000110010110\n001111010001\n011010100111\n101110011001\n001010001100\n010001011010\n110010100010\n100001111001\n001001010001\n010111101110\n100100111111\n100100101111\n011010100011\n101100011101\n000001011110\n111010111111\n101011010011\n111000110001\n111010100100\n000100001010\n010011011010\n110100100011\n010001011101\n011100110100\n100111111100\n100110010111\n111101010010\n011110101111\n001101010001\n001111000001\n101010101101\n100001111110\n100111010001\n001111110111\n011110111101\n000101010010\n111110001111\n100110011001\n101000110101\n100110000110\n000100100010\n000101110010\n010011110110\n011000111011\n011111111111\n000001100111\n101001010100\n010011101111\n101000101100\n111011100011\n001101011011\n001110101001\n001001001010\n001110111011\n110100111011\n110110010101\n010001111101\n001101111101\n110001100110\n110001000101\n010001001001\n110001101010\n100110011000\n001001010011\n100000111010\n111000000110\n101010101110\n011011011111\n100011111111\n110000011101\n000110100001\n100000110000\n010100100110\n100111111011\n101110100110\n011111111110\n111101011101\n010011100111\n111110101001\n111111011111\n000100001000\n101111110010\n001010011011\n010001001111\n010111110100\n100111110001\n011000000011\n000010110110\n011110100001\n100001011110\n110111001011\n100100010110\n010101110001\n011011111011\n101011001110\n110110110000\n001101000011\n101011100101\n000001111101\n001000011101\n010110000010\n000100011000\n111011001010\n100111111001\n100101000100\n100100001010\n110010111101\n110011100000\n110001110101\n001110011100\n000001011100\n101110101010\n110000111100\n100001011100\n101010001001\n100100111000\n011110111110\n101110111101\n110001011101\n000111110110\n011000110010\n100001101110\n100111011111\n010000000000\n110011111010\n000111000000\n111000100010\n110111100010\n110100001110\n110101101110\n110111011110\n101010000011\n000010000101\n011111111011\n100110100000\n111100101011\n000010001101\n001001100001\n111010111001\n101000001011\n000000010010\n100010000111\n111111111110\n000001011010\n010110101000\n010101000011\n110011101010\n100101101110\n111100100000\n100000000010\n000110101101\n011011110000\n111011101101\n011011101111\n010100000001\n101110000000\n110001001111\n001001011011\n010101000100\n011000111110\n010110111001\n110111001000\n000101000101\n101011000011\n111000001110\n111011110011\n100111000101\n110000111001\n100011010000\n111110010001\n001100010101\n110100010010\n100100101100\n101010101100\n001000111100\n110010101010\n100011001101\n000001110111\n010101010111\n100000001111\n100010011001\n010010101000\n111100001110\n101010001101\n110011000001\n011101011101\n001100001111\n101111111111\n111010101000\n110001111010\n111111001010\n011111001010\n010001010100\n101010100011\n100111110110\n111101100101\n101001100110\n010001011111\n010011001111\n101110011010\n111011000111\n011011111101\n000001001110\n101000010110\n010110010100\n000110100101\n011000000010\n011001001000\n101100000011\n111001100011\n010101001001\n011100110111\n101111100110\n111001111010\n000000110110\n001110011101\n101110001011\n011000010001\n111111000011\n101111000110\n001010101010\n011110111011\n101000101010\n011111000110\n101011010110\n001111001011\n001011111111\n111011010011\n001101011010\n000111010001\n110011111001\n100010101100\n010001100111\n011110110100\n100111100101\n101110001000\n000100110001\n100110110110\n000111101110\n110111101100\n001001101001\n100111100100\n110100000100\n110000100100\n111110011010\n100111010000\n000111011100\n101011110001\n101110111110\n001111111000\n001010100100\n000001111011\n100001001110\n010000110000\n110011001110\n001101111110\n101100101100\n010101011111\n011000001101\n111111101000\n100011010110\n101000011000\n100011110101\n111001110011\n111001011001\n110011100010\n111110110011\n101110011100\n001111100010\n000101010011\n100011101101\n011110110110\n010011000101\n010100101110\n001100010010\n010111001011\n111000011000\n010101001000\n100011100101\n111101001110\n100111110101\n110001000111\n110100011100\n010101010000\n101001010101\n001110000001\n010100111010\n100111011000\n110100000011\n000011100110\n001011100111\n111010110101\n001100101000\n111001101101\n011101100101\n110110111000\n000010010011\n010111101001\n111110111010\n100011010001\n111011111100\n101001110000\n111100101100\n011001010000\n101111001101\n100111001111\n011011000011\n101001001100\n001101001100\n110001001010\n111100011010\n101000010101\n110001011111\n011010001111\n011101000100\n010100100001\n010110100001\n101110100001\n010000100010\n010000111111\n110111010111\n010100000011\n111111111000\n101111101100\n011110110001\n111001010000\n011101101000\n001111110100\n000101111011\n101110111010\n001111001001\n111111110101\n011011100100\n101101101100\n110111101001\n000000111001\n010100010000\n100001001010\n111010100111\n101100001111\n110001001001\n011001001001\n001110101100\n001001110101\n101011111011\n010011011000\n001010010000\n001010001101\n011000001110\n100111111110\n011011010011\n011100011101\n101100110100\n101111000101\n100111100110\n110110000100\n101111100001\n000100011101\n010100101111\n000000001000\n010110010010\n000000000010\n111010010001\n111010111101\n001001000011\n101001010010\n100000001101\n101111101000\n011100001011\n110111100111\n111111000110\n110101001010\n010001011110\n000101100001\n000011100100\n101101110101\n011110100100\n110110101101\n000010010111\n100011010111\n101000110001\n011111010110\n111001001010\n000011000111\n001111001111\n101011001000\n100000111111\n110100011110\n000000100110\n101110010001\n010011011110\n100100011111\n010101111100\n001011010100\n110011101111\n001000101010\n001101010100\n001111111010\n000101100000\n110101100101\n110010111010\n101110001100\n110100111000\n001100000110\n001000101100\n001010101111\n100010100001\n011001101100\n110000101100\n000111001001\n100001011011\n000110010000\n110100100100\n111101101111\n111001100110\n101010001110\n101001011110\n101001111100\n000100101010\n111100011000\n100100001100\n101100001010\n100000100001\n001110010011\n011100011110\n000000101010\n011000010111\n010011110111\n001111101010\n000011110000\n110001111011\n011001110010\n001110010010\n110011110011\n111111100111\n101101100101\n110101111100\n100011110011\n001111011010\n111110111100\n101110001111\n101001111000\n100011100111\n110010001011\n000010000110\n110001010011\n101011011110\n001111101001\n000010001011\n110000101101\n111111100011\n100111001100\n101110111000\n111010000001\n101100100100\n110111000111\n000111111110\n111111000100\n100000001001\n101101100010\n000011001101\n111000001101\n110111010110\n010110100011\n101000101000\n010010101101\n110011011110\n111000000000\n011110111010\n000000010011\n100110110101\n101100011100\n111111100010\n100110001001\n100011000010\n011010000111\n111101000111\n111000011101\n101111101010\n100110100100\n010101011110\n001000011010\n110101000100\n001100100101\n010100011110\n001100110101\n101101000010\n010100111100\n110000000000\n101011101001\n111100110010\n100111010010\n010000001110\n011011010000\n011011100111\n110101000011\n100100101000\n000110001001\n110001010110\n100100001101\n010001110001\n101110101111\n100110001010\n011100110101\n001001100100\n001101100001\n100010101111\n101111101101\n111110000010\n001100001100\n111111001000\n001111001010\n000000100111\n001011010011\n011110000111\n010111011110\n111110000011\n100000111000\n010010111101\n010000000011\n010111110110\n011000100101\n110011101011\n001100101010\n101101001000\n000100000000\n111010110110\n100101001110\n001000001110\n011010111000\n110110011000\n110011001001\n101000000101\n010110011101\n110110010111\n010011110000\n111110011000\n100010101001\n110111000001\n001000110001\n101011001100\n111111100101\n011110010111\n011001111100\n010010011010\n001111011110\n110001100010\n001000110011\n110101101101\n110010011100\n010111101010\n001110101010\n010101101000\n001011000110\n010101111011\n101100001100\n110100010100\n001101000010\n101110110110\n001100100111\n101010001010\n110000100110\n010100110111\n101111110101\n110000101001\n000001010001\n001000000011\n101100100101\n111001001111\n010100001001\n100001010111\n000010110000\n001110001110\n111010000111\n100100111011\n101101010011\n100010110100\n110001001100\n110001010010\n101100100010\n011100100011\n010110000110\n000011010000\n000100111100\n111011110111\n001101101111\n001101011101\n010110101011\n000100100100\n100001100001\n100001110000\n010101111001\n001011011001\n111100000100\n011000001010\n111110001011\n000001101111\n000101011011\n011010011100\n001001110011\n011010011001\n100010011100\n010000110001\n111101100001\n011011010100\n010011111011\n101000010011\n100101111101\n000100111010\n101110111100\n111100111101\n000111000110\n111100000110\n001010100110\n000000100011\n110010001001\n101111001001\n100101100010\n111101001011\n001110111000\n100001000011\n100101100000\n100010010100\n010001000110\n101100111100\n101011101110\n001001101111\n010110000000\n010011100011\n001001110110\n101001011000\n000011001000\n010010011001\n101110010010\n000101010110\n111100101000\n111000100101\n101110000111\n000110011011\n101101001101\n001000111101\n110111000100\n000001001010\n111100001010\n001011101110\n111001000000\n001111111011\n101100000101\n001001011111\n001001000100\n000001010000\n101010000100\n010010111111\n101010101000\n111101111011\n001111010110\n001010011010\n001101001011\n100001000100\n001111110101\n011000100010\n101111001100\n101110110011\n101101110111\n001100100011\n110010000111\n011110110000\n101100011010\n100110010010\n000100101111\n011000011010\n110000010000\n001100101100\n111110100100\n101010001000\n101111110000\n101011110010\n100101101000\n100010100011\n011011011000\n000001010110\n100100100101\n111100101010\n100010110000\n100100111010\n001010110100\n110011100111\n010001010001\n110100011010\n100011111110\n101001010000\n011100100110\n111000101010\n001111001000\n"} -->

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
data =
  "input"
  |> IO.getn(1_000_000)
  |> String.split(["\r\n", "\n"], trim: true)
  |> Enum.map(fn line ->
    line
    |> String.split("", trim: true)
    |> Enum.map(fn b -> String.to_integer(b) end)
  end)
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
defmodule P1 do
  def calc(data) do
    data
    |> Enum.zip()
    |> Enum.map(&Tuple.to_list/1)
    |> Enum.map(&Enum.frequencies/1)
    |> Enum.map(fn %{0 => c0, 1 => c1} -> (c0 > c1 && 0) || 1 end)
    |> then(fn ns ->
      n1 = Integer.undigits(ns, 2)
      n2 = ns |> Enum.map(&(1 - &1)) |> Integer.undigits(2)
      n1 * n2
    end)
  end
end
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
P1.calc(data)
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
defmodule P2 do
  def calc(data) do
    data
    |> Enum.map(&List.to_tuple/1)
    |> then(fn ns ->
      n1 = ns |> filter(&Kernel.>/2, 0) |> Tuple.to_list() |> Integer.undigits(2)
      n2 = ns |> filter(&Kernel.<=/2, 0) |> Tuple.to_list() |> Integer.undigits(2)
      n1 * n2
    end)
  end

  def filter([line], _, _) do
    line
  end

  def filter(data, comp, index) do
    data
    |> Enum.map(&elem(&1, index))
    |> Enum.frequencies()
    |> IO.inspect()
    |> then(fn count -> (comp.(count[0], count[1]) && 0) || 1 end)
    |> then(fn b -> Enum.filter(data, &(elem(&1, index) == b)) end)
    |> then(fn data -> filter(data, comp, index + 1) end)
  end
end
```

<!-- livebook:{"reevaluate_automatically":true} -->

```elixir
P2.calc(data)
```
